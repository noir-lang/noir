---
title: BarretenbergBackend
description: Reference documentation for the barretenberg_backend library and the BarretenbergBackend class
keywords:
  [
    BarretenbergBackend,
    Barretenberg,
    javascript,
    typescript,
    node.js,
    browser,
    class,
    reference,
    noir_js,
  ]
---

## Table of Contents

- [constructor](#constructor)
- [generateFinalProof](#generatefinalproof)
- [generateIntermediateProof](#generateintermediateproof)
- [generateProof](#generateproof)
- [generateIntermediateProofArtifacts](#generateintermediateproofartifacts)
- [verifyFinalProof](#verifyfinalproof)
- [verifyIntermediateProof](#verifyintermediateproof)
- [verifyProof](#verifyproof)
- [destroy](#destroy)

## `constructor`

The `constructor` is a method used to create and initialize objects created within the `BarretenbergBackend` class. In this class, you should pass at least one argument for the `circuit`.

### Syntax

```js
constructor(acirCircuit, (numberOfThreads = 1));
```

### Parameters

| Parameter         | Type              | Description                                                                                                                                                                                                                             |
| ----------------- | ----------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `acirCircuit`     | Object            | A circuit represented in a `json` format, containing the ABI and bytecode Tipically obtained by running [`nargo compile`](../../nargo/01_commands.md). This is the same circuit expected to be passed to [the Noir class](02_noirjs.md) |
| `numberOfThreads` | Number (optional) | The number of threads to be used by the backend. Defaults to 1.                                                                                                                                                                         |

### Usage

```js
const backend = new BarretenbergBackend(acirCircuit);
```

## `generateFinalProof`

An async wrapper around the [generateProof](#generateproof) method that passes a `false` flag. Usually called by the Noir class.

### Syntax

```js
async generateFinalProof(decompressedWitness)
```

### Parameters

| Parameter             | Type   | Description                                              |
| --------------------- | ------ | -------------------------------------------------------- |
| `decompressedWitness` | Object | The decompressed witness for generating the final proof. |

### Returns

| Return value | Type                 | Description                                               |
| ------------ | -------------------- | --------------------------------------------------------- |
| `proof`      | Promise<Uint8Array\> | An array with the byte representation of the final proof. |

### Usage

```js
const finalProof = await backend.generateFinalProof(decompressedWitness);
```

## `generateIntermediateProof`

An async wrapper around the [generateProof](#generateproof) method that passes a `true` flag. It's not currently being used by the Noir class, but developers can call this method directly to use Noir's recursive features.

### Syntax

```js
async generateIntermediateProof(witness)
```

### Parameters

| Parameter | Type   | Description                                        |
| --------- | ------ | -------------------------------------------------- |
| `witness` | Object | The witness for generating the intermediate proof. |

### Returns

| Return value | Type                 | Description                                                     |
| ------------ | -------------------- | --------------------------------------------------------------- |
| `proof`      | Promise<Uint8Array\> | An array with the byte representation of the intermediate proof |

### Usage

```js
const intermediateProof = await backend.generateIntermediateProof(witness);
```

## `generateProof`

This async method generates a proof. Takes the witness generated by ACVM, and a boolean that evaluates to `true` when the proof _is_ meant to be verified in another circuit. Not currently used by the Noir class.

### Syntax

```js
async generateProof(decompressedWitness, makeEasyToVerifyInCircuit)
```

### Parameters

| Parameter                   | Type    | Description                                                                                    |
| --------------------------- | ------- | ---------------------------------------------------------------------------------------------- |
| `decompressedWitness`       | Object  | The decompressed witness for generating the proof.                                             |
| `makeEasyToVerifyInCircuit` | Boolean | A flag indicating whether to generate proof components for easy verification within a circuit. |

### Returns

| Return value | Type                 | Description                                        |
| ------------ | -------------------- | -------------------------------------------------- |
| `proof`      | Promise<Uint8Array\> | An array with the byte representation of the proof |

### Usage

```js
const proof = await backend.generateProof(decompressedWitness, makeEasyToVerifyInCircuit);
```

## `generateIntermediateProofArtifacts`

This async method returns the artifacts needed to verify the intermediate proof in another circuit. It's not currently being used by the Noir class, but developers can call this method directly to use Noir's recursive features.

### Syntax

```js
async generateIntermediateProofArtifacts(proof, numOfPublicInputs = 0)
```

### Parameters

| Parameter           | Type              | Description                                                      |
| ------------------- | ----------------- | ---------------------------------------------------------------- |
| `proof`             | Object            | The proof object.                                                |
| `numOfPublicInputs` | Number (optional) | The number of public inputs in the inner proof, defaulting to 0. |

### Returns

| Return value    | Type     | Description                                                                                                                                                |
| --------------- | -------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `proofAsFields` | string[] | An array of strings with the hexadecimal representation of the [Fields](../../language_concepts/data_types/00_fields.md) that make up a proof              |
| `vkAsFields`    | string[] | An array of strings with the hexadecimal representation of the [Fields](../../language_concepts/data_types/00_fields.md) that make up the verification key |
| `vkHash`        | string   | A pedersen hash of the verification key                                                                                                                    |

### Usage

```js
const artifacts = await backend.generateIntermediateProofArtifacts(proof, numOfPublicInputs);
```

## `verifyFinalProof`

An async wrapper around [verifyProof](#verifyproof) that sets the `false` flag. Usually called by the Noir class.

### Syntax

```js
async verifyFinalProof(proof)
```

### Parameters

| Parameter | Type   | Description                 |
| --------- | ------ | --------------------------- |
| `proof`   | Object | The proof object to verify. |

### Returns

| Return value | Type               | Description                                  |
| ------------ | ------------------ | -------------------------------------------- |
| `verified`   | Promise <boolean\> | A boolean for whether the proof was verified |

### Usage

```js
const isValidFinal = await backend.verifyFinalProof(proof);
```

## `verifyIntermediateProof`

An async wrapper around [verifyProof](#verifyproof) that sets the `true` flag. It's not currently being used by the Noir class, but developers can call this method directly to use Noir's recursive features.

### Syntax

```js
async verifyIntermediateProof(proof)
```

### Parameters

| Parameter | Type   | Description                              |
| --------- | ------ | ---------------------------------------- |
| `proof`   | Object | The intermediate proof object to verify. |

### Returns

| Return value | Type               | Description                                  |
| ------------ | ------------------ | -------------------------------------------- |
| `verified`   | Promise <boolean\> | A boolean for whether the proof was verified |

### Usage

```js
const isValidIntermediate = await backend.verifyIntermediateProof(proof);
```

## `verifyProof`

This async method verifies a proof. Takes the proof, and a boolean that evaluates to `true` when the proof is intermediate.

### Syntax

```js
async verifyProof(proof, makeEasyToVerifyInCircuit)
```

### Parameters

| Parameter                   | Type    | Description                                                  |
| --------------------------- | ------- | ------------------------------------------------------------ |
| `proof`                     | Object  | The proof object to verify                                   |
| `makeEasyToVerifyInCircuit` | Boolean | A flag indicating whether the proof is intermediate or final |

### Returns

| Parameter  | Type               | Description                                  |
| ---------- | ------------------ | -------------------------------------------- |
| `verified` | Promise\<boolean\> | A boolean for whether the proof was verified |

### Usage

```js
const isValid = await backend.verifyProof(proof, makeEasyToVerifyInCircuit);
```

## `destroy`

This method destroys the resources allocated in the [instantiate](#instantiate) method. Noir doesn't currently call this method, but it's highly recommended that developers do so in order to save resources.

### Syntax

```js
async destroy()
```

### Parameters

This method takes no parameters.

### Usage

```js
await backend.destroy();
```
