<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Implement a post-monomorphization pass where builtin/intrinsic/oracle functions used as values are wrapped in a proxy function which replaces them as a value and forwards calls to them."><title>noirc_frontend::monomorphization::proxies - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../../static.files/rustdoc-46132b98.css"><meta name="rustdoc-vars" data-root-path="../../../" data-static-root-path="../../../static.files/" data-current-crate="noirc_frontend" data-themes="" data-resource-suffix="" data-rustdoc-version="1.85.0 (4d91de4e4 2025-02-17)" data-channel="1.85.0" data-search-js="search-75f5ac3e.js" data-settings-js="settings-0f613d39.js" ><script src="../../../static.files/storage-59e33391.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../../static.files/main-5f194d8c.js"></script><noscript><link rel="stylesheet" href="../../../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../../../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../../noirc_frontend/index.html">noirc_<wbr>frontend</a><span class="version">1.0.0-beta.18</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module proxies</a></h2><h3><a href="#structs">Module Items</a></h3><ul class="block"><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"><h2><a href="../index.html">In noirc_<wbr>frontend::<wbr>monomorphization</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><span class="rustdoc-breadcrumbs"><a href="../../index.html">noirc_frontend</a>::<wbr><a href="../index.html">monomorphization</a></span><h1>Module <span>proxies</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../../src/noirc_frontend/monomorphization/proxies.rs.html#1-398">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Implement a post-monomorphization pass where builtin/intrinsic/oracle functions used as values
are wrapped in a proxy function which replaces them as a value and forwards calls to them.</p>
<p>The reason this exists is because by the time we get to the <code>defunctionalize</code> SSA pass it would
not be possible to deal with function pointers to foreign functions, because unlike for normal
functions, we donâ€™t have type information for them in the SSA. That is, we canâ€™t tell what their
parameter and return types are when they are just passed around as a value.</p>
<p>The type information is still available in the monomorphized AST though, so we can find all
instances where a foreign function is referenced by an <a href="../ast/enum.Expression.html#variant.Ident" title="variant noirc_frontend::monomorphization::ast::Expression::Ident"><code>Ident</code></a>
without actually being the target of a <a href="../ast/enum.Expression.html#variant.Call" title="variant noirc_frontend::monomorphization::ast::Expression::Call"><code>Call</code></a>,
and replace them with a normal function, which will preserve the information we need create
dispatch functions for them in the <code>defunctionalize</code> pass.</p>
<p>The pass also automatically wraps direct calls to oracle functions from constrained functions,
which, after creating wrapper for function values, would only present an inconvenience for users
if they have to keep creating wrappers themselves.</p>
</div></details><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.ForeignFunctionValue.html" title="struct noirc_frontend::monomorphization::proxies::ForeignFunctionValue">Foreign<wbr>Function<wbr>Value</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </div><div class="desc docblock-short">When function values are passed around in the monomorphized AST,
they appear as a pair (tuple) of a constrained and unconstrained
function.</div></li><li><div class="item-name"><a class="struct" href="struct.ProxyContext.html" title="struct noirc_frontend::monomorphization::proxies::ProxyContext">Proxy<wbr>Context</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </div></li></ul><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">Â§</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.is_foreign_func.html" title="fn noirc_frontend::monomorphization::proxies::is_foreign_func">is_<wbr>foreign_<wbr>func</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </div><div class="desc docblock-short">Check if the definition is that of a function defined by a â€œnameâ€ rather than an ID.</div></li><li><div class="item-name"><a class="fn" href="fn.is_func_pair.html" title="fn noirc_frontend::monomorphization::proxies::is_func_pair">is_<wbr>func_<wbr>pair</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </div><div class="desc docblock-short">Check that the identifier is of a pair of constrained and unconstrained function types.</div></li><li><div class="item-name"><a class="fn" href="fn.make_proxy.html" title="fn noirc_frontend::monomorphization::proxies::make_proxy">make_<wbr>proxy</a><span title="Restricted Visibility">&nbsp;ğŸ”’</span> </div><div class="desc docblock-short">Create a proxy function definition for a foreign function based on an identifier that got replaced.</div></li></ul></section></div></main></body></html>